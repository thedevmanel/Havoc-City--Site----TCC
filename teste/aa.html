<!DOCTYPE html>
<html>
  <head>
    <title>Leitor de Arquivos de Texto</title>
  </head>

  <body>
    <input type="file" id="fileInput" accept=".sav" />
    <div id="numericValues"></div>

    <!-- Campos de entrada existentes -->
    <form action="saveData.php" method="get">
      <input type="text" id="seconds" name="seconds" readonly />
      <input type="text" id="minutes" name="minutes" readonly />
      <input type="text" id="hours" name="hours" readonly />
      <input type="text" id="pontuation" name="pontuation" readonly />

      <!-- Botão de confirmação e submit -->
      <div id="confirmationDiv" style="display: none;">
        <p>Voce tem certeza de que quer enviar os dados?</p>
        <input type="submit" value="Confirmar Envio" />
      </div>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const fileInput = document.getElementById("fileInput");
        const confirmationDiv = document.getElementById("confirmationDiv");

        fileInput.addEventListener("change", function (event) {
          const selectedFile = event.target.files[0];

          if (selectedFile) {
            const reader = new FileReader();

            reader.onload = function (e) {
              const fileText = e.target.result;

              // Use a regular expression to extract numeric values from lines
              const regex =
                /(?:seconds|minutes|hours|pontuation)="(\d+\.\d+)"/g;
              let match;

              while ((match = regex.exec(fileText)) !== null) {
                const fieldName = match[0].split("=")[0];
                const value = match[1];

                // Preencha os campos de entrada existentes com os valores extraídos
                const inputField = document.getElementById(fieldName);
                if (inputField) {
                  inputField.value = value;
                }
              }

              // Mostrar o botão de confirmação após a leitura do arquivo
              confirmationDiv.style.display = "block";
            };

            reader.readAsText(selectedFile);
          }
        });
      });
    </script>
  </body>
</html>
